version: '3'



tasks:
  tf-init:
    dir: terraform
    cmds:
      - terraform init 
  
  tf-plan:
    dir: terraform
    cmds:
      - terraform plan

  tf-apply:
    dir: terraform
    cmds:
      - terraform apply

  tf-destroy:
    dir: terraform
    cmds:
      - terraform destroy

  go-run-main:
    dir: go-hello
    cmds:
      - go run main.go

  go-build-image:
    dir: go-hello
    cmds:
      - docker build -t go-hello:v2 .

  get-signed-url:
    dir: bucket
    env: 
      CLOUDSDK_PYTHON_SITEPACKAGES: "1" 
    cmds:
      - bash ./get-signed.sh

  upload-mp4:
    dir: bucket
    cmds:
      - bash ./upload.sh